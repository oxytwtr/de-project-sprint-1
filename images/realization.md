# Витрина RFM

## 1.1. Выясните требования к целевой витрине.

Постановка задачи выглядит достаточно абстрактно - постройте витрину. Первым делом вам необходимо выяснить у заказчика детали. Запросите недостающую информацию у заказчика в чате.

Зафиксируйте выясненные требования. Составьте документацию готовящейся витрины на основе заданных вами вопросов, добавив все необходимые детали.

-----------
<font size = 5, color=MediumAquamarine> Ответ студента</font> 
<font color= Ivory>
### **Что сделать:**

Построить витрину с данными для RFM-классификации пользователей приложения.


Витрину назвать `dm_rfm_segments` и разместить в схеме `analysis` базы данных `DE`

### **Назначение:**
Подготовить данные для компании разрабатывающей приложение для доставки еды. Необходима сегментация клиентов на основе данных их заказов для анализа лояльности клиентов. 

### **За какой период:**
Использовать данные с начала `2022 года по текущий момент` 

### **Обновление данных:**
Не требуется

### **Источник данных:**
В базе две схемы: `production` и `analysis`. В схеме `production` содержатся оперативные таблицы.

### **Права доступа:**
Не определено. Права доступа всем, на чтение.

### **Необходимая структура:**

- `user_id` - Идентификатор клиента
- `recency` - «давность» — фактор оценки прошедшего времени с момента последнего заказа. Значение шкалы в диапазоне [1..5], где 1 - наибольшее время с последнего заказа, 5 -наименьшее время с последнего заказа 
- `frequency` - «частота» — фактор оценки количества заказов за рассматриваемый период. Значение шкалы в диапазоне [1..5], где 1 - наименьшее кол-во заказов, 5 - наибольшее кол-во заказов.
- `monetary_value` - «денежная ценность» — фактор оценки потраченной клиентом суммы за рассматриваемый период. Значение шкалы в диапазоне [1..5], где 1 - наименьшая сумма затрат, 5 - наибольшая сумма затрат.

Количество клиентов в каждом сегменте должно быть одинаково. То есть распределение клиентов по шкалам - равномерное.
</font> 

11-56 asdasdasd

## 1.2. Изучите структуру исходных данных.

Полключитесь к базе данных и изучите структуру таблиц.

Если появились вопросы по устройству источника, задайте их в чате.

Зафиксируйте, какие поля вы будете использовать для расчета витрины.

-----------

<font size = 5, color=MediumAquamarine> Ответ студента</font> 
<font color= Ivory>

В схеме production 6 таблиц, из которых 2 пустые
- orderitems - 47 369 строк, 
- orders - 10_000 строк,
- orderstatuses - 0 строк,
- orderstatuslog - 29_982 строк,
- products - 0 строк,
- users - 1_000 строк

![Схема базы данных]("https://github.com/oxytwtr/de-project-sprint-1/raw/main/images/schema.png" )



</font> 


## 1.3. Проанализируйте качество данных

Изучите качество входных данных. Опишите, насколько качественные данные хранятся в источнике. Так же укажите, какие инструменты обеспечения качества данных были использованы в таблицах в схеме production.

-----------

{Впишите сюда ваш ответ}


## 1.4. Подготовьте витрину данных

Теперь, когда требования понятны, а исходные данные изучены, можно приступить к реализации.

### 1.4.1. Сделайте VIEW для таблиц из базы production.**

Вас просят при расчете витрины обращаться только к объектам из схемы analysis. Чтобы не дублировать данные (данные находятся в этой же базе), вы решаете сделать view. Таким образом, View будут находиться в схеме analysis и вычитывать данные из схемы production. 

Напишите SQL-запросы для создания пяти VIEW (по одному на каждую таблицу) и выполните их. Для проверки предоставьте код создания VIEW.

```SQL
--Впишите сюда ваш ответ


```

### 1.4.2. Напишите DDL-запрос для создания витрины.**

Далее вам необходимо создать витрину. Напишите CREATE TABLE запрос и выполните его на предоставленной базе данных в схеме analysis.

```SQL
--Впишите сюда ваш ответ


```

### 1.4.3. Напишите SQL запрос для заполнения витрины

Наконец, реализуйте расчет витрины на языке SQL и заполните таблицу, созданную в предыдущем пункте.

Для решения предоставьте код запроса.

```SQL
--Впишите сюда ваш ответ


```



